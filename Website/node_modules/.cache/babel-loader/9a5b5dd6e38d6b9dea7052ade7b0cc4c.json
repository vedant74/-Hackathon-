{"ast":null,"code":"var _jsxFileName = \"/Users/bhavyameghnani/Desktop/react-saas-template/src/shared/components/CardChart.js\";\nimport React, { useState, useCallback } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { AreaChart, Area, XAxis, Tooltip, ResponsiveContainer, YAxis } from \"recharts\";\nimport format from \"date-fns/format\";\nimport { Card, CardContent, Typography, IconButton, Menu, MenuItem, withStyles, Box } from \"@material-ui/core\";\nimport MoreVertIcon from \"@material-ui/icons/MoreVert\";\n\nconst styles = theme => ({\n  cardContentInner: {\n    marginTop: theme.spacing(-4)\n  }\n});\n\nfunction labelFormatter(label) {\n  return format(new Date(label * 1000), \"MMMM d, p yyyy\");\n}\n\nfunction calculateMin(data, yKey, factor) {\n  let max = Number.POSITIVE_INFINITY;\n  data.forEach(element => {\n    if (max > element[yKey]) {\n      max = element[yKey];\n    }\n  });\n  return Math.round(max - max * factor);\n}\n\nconst itemHeight = 216;\nconst options = [\"1 Week\", \"1 Month\", \"6 Months\"];\n\nfunction CardChart(props) {\n  const {\n    color,\n    data,\n    title,\n    classes,\n    theme,\n    height\n  } = props;\n  const [anchorEl, setAnchorEl] = useState(null);\n  const [selectedOption, setSelectedOption] = useState(\"1 Month\");\n  const handleClick = useCallback(event => {\n    setAnchorEl(event.currentTarget);\n  }, [setAnchorEl]);\n  const formatter = useCallback(value => {\n    return [value, title];\n  }, [title]);\n  const getSubtitle = useCallback(() => {\n    switch (selectedOption) {\n      case \"1 Week\":\n        return \"Last week\";\n\n      case \"1 Month\":\n        return \"Last month\";\n\n      case \"6 Months\":\n        return \"Last 6 months\";\n\n      default:\n        throw new Error(\"No branch selected in switch-statement\");\n    }\n  }, [selectedOption]);\n  const processData = useCallback(() => {\n    let seconds;\n\n    switch (selectedOption) {\n      case \"1 Week\":\n        seconds = 60 * 60 * 24 * 7;\n        break;\n\n      case \"1 Month\":\n        seconds = 60 * 60 * 24 * 31;\n        break;\n\n      case \"6 Months\":\n        seconds = 60 * 60 * 24 * 31 * 6;\n        break;\n\n      default:\n        throw new Error(\"No branch selected in switch-statement\");\n    }\n\n    const minSeconds = new Date() / 1000 - seconds;\n    const arr = [];\n\n    for (let i = 0; i < data.length; i += 1) {\n      if (minSeconds < data[i].timestamp) {\n        arr.unshift(data[i]);\n      }\n    }\n\n    return arr;\n  }, [data, selectedOption]);\n  const handleClose = useCallback(() => {\n    setAnchorEl(null);\n  }, [setAnchorEl]);\n  const selectOption = useCallback(selectedOption => {\n    setSelectedOption(selectedOption);\n    handleClose();\n  }, [setSelectedOption, handleClose]);\n  const isOpen = Boolean(anchorEl);\n  return /*#__PURE__*/React.createElement(Card, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Box, {\n    pt: 2,\n    px: 2,\n    pb: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Box, {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"subtitle1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 13\n    }\n  }, title), /*#__PURE__*/React.createElement(Typography, {\n    variant: \"body2\",\n    color: \"textSecondary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 13\n    }\n  }, getSubtitle())), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(IconButton, {\n    \"aria-label\": \"More\",\n    \"aria-owns\": isOpen ? \"long-menu\" : undefined,\n    \"aria-haspopup\": \"true\",\n    onClick: handleClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(MoreVertIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(Menu, {\n    id: \"long-menu\",\n    anchorEl: anchorEl,\n    open: isOpen,\n    onClose: handleClose,\n    PaperProps: {\n      style: {\n        maxHeight: itemHeight,\n        width: 200\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 13\n    }\n  }, options.map(option => /*#__PURE__*/React.createElement(MenuItem, {\n    key: option,\n    selected: option === selectedOption,\n    onClick: () => {\n      selectOption(option);\n    },\n    name: option,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 17\n    }\n  }, option)))))), /*#__PURE__*/React.createElement(CardContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Box, {\n    className: classes.cardContentInner,\n    height: height,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(ResponsiveContainer, {\n    width: \"100%\",\n    height: \"100%\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(AreaChart, {\n    data: processData(),\n    type: \"number\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(XAxis, {\n    dataKey: \"timestamp\",\n    type: \"number\",\n    domain: [\"dataMin\", \"dataMax\"],\n    hide: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(YAxis, {\n    domain: [calculateMin(data, \"value\", 0.05), \"dataMax\"],\n    hide: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(Area, {\n    type: \"monotone\",\n    dataKey: \"value\",\n    stroke: color,\n    fill: color,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(Tooltip, {\n    labelFormatter: labelFormatter,\n    formatter: formatter,\n    cursor: false,\n    contentStyle: {\n      border: \"none\",\n      padding: theme.spacing(1),\n      borderRadius: theme.shape.borderRadius,\n      boxShadow: theme.shadows[1]\n    },\n    labelStyle: theme.typography.body1,\n    itemStyle: {\n      fontSize: theme.typography.body1.fontSize,\n      letterSpacing: theme.typography.body1.letterSpacing,\n      fontFamily: theme.typography.body1.fontFamily,\n      lineHeight: theme.typography.body1.lineHeight,\n      fontWeight: theme.typography.body1.fontWeight\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 15\n    }\n  }))))));\n}\n\nCardChart.propTypes = {\n  color: PropTypes.string.isRequired,\n  data: PropTypes.array.isRequired,\n  title: PropTypes.string.isRequired,\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  height: PropTypes.string.isRequired\n};\nexport default withStyles(styles, {\n  withTheme: true\n})(CardChart);","map":{"version":3,"sources":["/Users/bhavyameghnani/Desktop/react-saas-template/src/shared/components/CardChart.js"],"names":["React","useState","useCallback","PropTypes","AreaChart","Area","XAxis","Tooltip","ResponsiveContainer","YAxis","format","Card","CardContent","Typography","IconButton","Menu","MenuItem","withStyles","Box","MoreVertIcon","styles","theme","cardContentInner","marginTop","spacing","labelFormatter","label","Date","calculateMin","data","yKey","factor","max","Number","POSITIVE_INFINITY","forEach","element","Math","round","itemHeight","options","CardChart","props","color","title","classes","height","anchorEl","setAnchorEl","selectedOption","setSelectedOption","handleClick","event","currentTarget","formatter","value","getSubtitle","Error","processData","seconds","minSeconds","arr","i","length","timestamp","unshift","handleClose","selectOption","isOpen","Boolean","undefined","style","maxHeight","width","map","option","border","padding","borderRadius","shape","boxShadow","shadows","typography","body1","fontSize","letterSpacing","fontFamily","lineHeight","fontWeight","propTypes","string","isRequired","array","object","withTheme"],"mappings":"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","sourcesContent":["import React, { useState, useCallback } from \"react\";\nimport PropTypes from \"prop-types\";\nimport {\n  AreaChart,\n  Area,\n  XAxis,\n  Tooltip,\n  ResponsiveContainer,\n  YAxis\n} from \"recharts\";\nimport format from \"date-fns/format\";\nimport {\n  Card,\n  CardContent,\n  Typography,\n  IconButton,\n  Menu,\n  MenuItem,\n  withStyles,\n  Box\n} from \"@material-ui/core\";\nimport MoreVertIcon from \"@material-ui/icons/MoreVert\";\n\nconst styles = theme => ({\n  cardContentInner: {\n    marginTop: theme.spacing(-4)\n  }\n});\n\nfunction labelFormatter(label) {\n  return format(new Date(label * 1000), \"MMMM d, p yyyy\");\n}\n\nfunction calculateMin(data, yKey, factor) {\n  let max = Number.POSITIVE_INFINITY;\n  data.forEach(element => {\n    if (max > element[yKey]) {\n      max = element[yKey];\n    }\n  });\n  return Math.round(max - max * factor);\n}\n\nconst itemHeight = 216;\nconst options = [\"1 Week\", \"1 Month\", \"6 Months\"];\n\nfunction CardChart(props) {\n  const { color, data, title, classes, theme, height } = props;\n  const [anchorEl, setAnchorEl] = useState(null);\n  const [selectedOption, setSelectedOption] = useState(\"1 Month\");\n\n  const handleClick = useCallback(\n    event => {\n      setAnchorEl(event.currentTarget);\n    },\n    [setAnchorEl]\n  );\n\n  const formatter = useCallback(\n    value => {\n      return [value, title];\n    },\n    [title]\n  );\n\n  const getSubtitle = useCallback(() => {\n    switch (selectedOption) {\n      case \"1 Week\":\n        return \"Last week\";\n      case \"1 Month\":\n        return \"Last month\";\n      case \"6 Months\":\n        return \"Last 6 months\";\n      default:\n        throw new Error(\"No branch selected in switch-statement\");\n    }\n  }, [selectedOption]);\n\n  const processData = useCallback(() => {\n    let seconds;\n    switch (selectedOption) {\n      case \"1 Week\":\n        seconds = 60 * 60 * 24 * 7;\n        break;\n      case \"1 Month\":\n        seconds = 60 * 60 * 24 * 31;\n        break;\n      case \"6 Months\":\n        seconds = 60 * 60 * 24 * 31 * 6;\n        break;\n      default:\n        throw new Error(\"No branch selected in switch-statement\");\n    }\n    const minSeconds = new Date() / 1000 - seconds;\n    const arr = [];\n    for (let i = 0; i < data.length; i += 1) {\n      if (minSeconds < data[i].timestamp) {\n        arr.unshift(data[i]);\n      }\n    }\n    return arr;\n  }, [data, selectedOption]);\n\n  const handleClose = useCallback(() => {\n    setAnchorEl(null);\n  }, [setAnchorEl]);\n\n  const selectOption = useCallback(\n    selectedOption => {\n      setSelectedOption(selectedOption);\n      handleClose();\n    },\n    [setSelectedOption, handleClose]\n  );\n\n  const isOpen = Boolean(anchorEl);\n  return (\n    <Card>\n      <Box pt={2} px={2} pb={4}>\n        <Box display=\"flex\" justifyContent=\"space-between\">\n          <div>\n            <Typography variant=\"subtitle1\">{title}</Typography>\n            <Typography variant=\"body2\" color=\"textSecondary\">\n              {getSubtitle()}\n            </Typography>\n          </div>\n          <div>\n            <IconButton\n              aria-label=\"More\"\n              aria-owns={isOpen ? \"long-menu\" : undefined}\n              aria-haspopup=\"true\"\n              onClick={handleClick}\n            >\n              <MoreVertIcon />\n            </IconButton>\n            <Menu\n              id=\"long-menu\"\n              anchorEl={anchorEl}\n              open={isOpen}\n              onClose={handleClose}\n              PaperProps={{\n                style: {\n                  maxHeight: itemHeight,\n                  width: 200\n                }\n              }}\n            >\n              {options.map(option => (\n                <MenuItem\n                  key={option}\n                  selected={option === selectedOption}\n                  onClick={() => {\n                    selectOption(option);\n                  }}\n                  name={option}\n                >\n                  {option}\n                </MenuItem>\n              ))}\n            </Menu>\n          </div>\n        </Box>\n      </Box>\n      <CardContent>\n        <Box className={classes.cardContentInner} height={height}>\n          <ResponsiveContainer width=\"100%\" height=\"100%\">\n            <AreaChart data={processData()} type=\"number\">\n              <XAxis\n                dataKey=\"timestamp\"\n                type=\"number\"\n                domain={[\"dataMin\", \"dataMax\"]}\n                hide\n              />\n              <YAxis\n                domain={[calculateMin(data, \"value\", 0.05), \"dataMax\"]}\n                hide\n              />\n              <Area\n                type=\"monotone\"\n                dataKey=\"value\"\n                stroke={color}\n                fill={color}\n              />\n              <Tooltip\n                labelFormatter={labelFormatter}\n                formatter={formatter}\n                cursor={false}\n                contentStyle={{\n                  border: \"none\",\n                  padding: theme.spacing(1),\n                  borderRadius: theme.shape.borderRadius,\n                  boxShadow: theme.shadows[1]\n                }}\n                labelStyle={theme.typography.body1}\n                itemStyle={{\n                  fontSize: theme.typography.body1.fontSize,\n                  letterSpacing: theme.typography.body1.letterSpacing,\n                  fontFamily: theme.typography.body1.fontFamily,\n                  lineHeight: theme.typography.body1.lineHeight,\n                  fontWeight: theme.typography.body1.fontWeight\n                }}\n              />\n            </AreaChart>\n          </ResponsiveContainer>\n        </Box>\n      </CardContent>\n    </Card>\n  );\n}\n\nCardChart.propTypes = {\n  color: PropTypes.string.isRequired,\n  data: PropTypes.array.isRequired,\n  title: PropTypes.string.isRequired,\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  height: PropTypes.string.isRequired\n};\n\nexport default withStyles(styles, { withTheme: true })(CardChart);\n"]},"metadata":{},"sourceType":"module"}